# C#班 解答の仕方
## はじめに
これは前期の講習内容の総復習をする問題です。  
基本問題と発展問題に分かれていますが、基本問題が全部解けるようになれば、初心者としてはまず一歩を踏み出せているかな、という感じです。  
もちろん、プログラミング部としては基本問題だけでは悲しいですが、千里の道も一歩からです。  
問題の解答には、「SourceTree」と「Github」を使います。  
前期の講習では、ちゃんと教えられなかったので、これらの使い方を解説しながら、解答方法を説明します。
この解説を読めば、問題解答以外の部分に余計な労力を使わなくて済むよう頑張って書くので、長くなるとは思いますがぜひ読んでください。

以下3点にわたって説明します。

1. 問題の入手方法
1. 解答方法
1. 解答の提出方法

## 問題の入手方法
### Gitって何？
そもそも「Git」、「Github」、「SourceTree」って何？という人がまだまだ多いと思います。  
 **「Git」** がわかればあとの2つはわかります。  

じゃあGitってなんだよ、ということですが。  
Gitは **(分散型)バージョン管理システム** というものです。  
**バージョン管理システム** とは、ファイルがいつ作成され、いつどこがどのように編集されたかという履歴を管理するシステムのことです。  
また、多くのバージョン管理システムでは複数人による共同編集を想定して作られているものが多く、Gitもその一つです。  
そのため、誰が編集したかという履歴も管理されます。  

例えば、みんなはある程度コードを組んでいるときに、
```
ちょっとこのコードを試してみたいけど、今あるコードがだいぶ崩れちゃうし、うまくいくかもわからないから、
プロジェクトをまるごとコピーしてこっちに書いてみよう
```
とかやったことありませんか。  
でもこのやり方だと、色々と面倒ですし、問題も起こります。  
具体的にどのようなことが起こるか、T君という主人公を登場させて説明したいと思います。

1.   
```
Tくんはある日、自分が作っていた「SyoryuKen」というゲームのプロジェクトに、
コマンドを打って遊ぶことができる機能をつけようと思いました。
まだうまく実装できる自信がなかったので、「SyoryuKen」をまるごとコピーして
「SyoryuKen_AddCommand」とフォルダに名前をつけました。  
ですが、「SyoryuKen_AddCommand」にコーディングしている途中、
ゲームパッドで遊べるようにしていなかったのを思い出しました。  
これも最初からうまくいくわからないので、「SyoryuKen」をコピーして
「SyoryuKen_AddGamepad」と名前をつけました。  
二つの機能を平行してコーディングしているうちに、コマンドのほうが先に完成しました。
ですが、他にも同時に作業しているものがあったので、
これを新たなプロジェクトとして使うことはできませんでした。
なので、「SyoryuKen」にコピペして追加しました。
この作業が実に悲しく面倒なのでした。
```

1.   
```
Tくんはまだ経験が浅いですが、とにかくたくさん機能を追加したかったので欲張り屋さんです。
そのため、追加したい機能ごとにプロジェクト全体をたくさんコピーしました。
Tくんは、最初はコピーしたプロジェクトがなんの機能を試したいものかがわかるように、
さっきのようにフォルダ名にちゃんと機能の名前を書いていました。
ですが、途中から面倒になり、コピーしたものの名前は全部コピー元の名前に1とか2とか
数字をつけるだけになってしまいました。  
また、その時々でデスクトップやらドキュメントやら色々なところにコピーしてしまったので、
行方不明のものも出てしまいました。  
その結果、Tくんは膨大なコピーの前にどれがどれだかわからなくなってしまいました。
```

1.  
```
プロジェクト「SyoryuKen」の反響が意外とよく、これは本格的なプロジェクトにしようとTくんは思いました。
ですが、そうすると大量に機能を追加したり、グラフィック関係も強化しないといけませんでした。
もう一人で開発をするのは無理なレベルです。
そこでTくんは友達3人と一緒に開発することにしました。
ここで一つ問題が生じました。
「どうやってファイルを共有すればいいんだ。」
そこで彼らはファイル共有といえばDropboxだといって使うことにしました。
ですが、同じファイルを違う人が同時に編集していて、
いつの間にかコンフリクトファイルができていて、統合が大変でした。
Dropboxもバージョン管理をしてくれますが、保存するたびに一つの編集履歴とします。
ですが、プログラミングにおいては、編集して実行、編集して実行を細かく繰り返すので、
前の状態に戻すときに細かすぎて不便です。
それに様々なファイルの一連の編集全体を戻すことができないので、一つのファイルを前の状態に戻したときに、
ファイル間で整合性がとれなくなる可能性もあります。
とにかく、みんながどんどん編集するので、ファイルがどんどんめちゃくちゃになっていきました。
ある日エラーが直せず、プログラムが動かなくなってしまいました。
修正しようにもファイルがぐちゃぐちゃなので、直せそうな兆しがありません。
結局このプロジェクトは消え去りました。
```
1.   
```
Tくんは応数件に入りました。
そこでGitを学びました。
今までの問題が全て解決しました。
```

今紹介した問題は、Gitの機能で全て解決します。  
これ以降の解説では、問題の解答提出に必要な部分に絞って説明します。  
もし通常の開発で使えるレベルに知りたい人は、ネットで調べてみてください。

### Github・SourceTree
ここまでくれば、この二つが何かは簡単です。  
実は通常のGitはすべてコマンドで操作します。  
それではなかなか扱いづらいし初心者には厳しいので、SourceTreeを使います。  
**SourceTree** はGitを **GUI化したソフト** なのです。  

次に **Github** ですが、これはGitで管理しているファイルをサーバーに上げておける **ウェブサービス** です。  
これを使うことにより、簡単に複数人とプロジェクトを共有できるのです。

### クローン
他人がバージョン管理していたファイルは、Githubのサーバー上にあるのでダウンロードして手に入れることができます。  
ですが、ただのダウンロードではファイルを落としてくるだけです。  
バージョン管理情報も一緒に落としてきて、自分のPC上でもその続きでバージョン管理できるようなダウンロード方法があります。  
それが **クローン** です。

早速解答用の(リモート)レポジトリをクローンしてみましょう。  

※レポジトリとはバージョン管理をしているファイル群のひとまとまりを言います。  
visual studioで言えば、ソリューションでいくつかのプロジェクトやファイルをまとめて管理していると思いますが、そのソリューションがレポジトリのようなものです。  

※自分のPCの上にあるレポジトリのことをローカルレポジトリといいます。  
Githubのサーバーにもこのレポジトリをそのままアップロードしているので区別するために、こっちをリモートレポジトリといいます。
1. https://github.com/TUS-OSK/beginner-test-2015/
にアクセスする
1. ここをクリックしてコピーする
![HTTPS clone URLと書いてあるところのURLをコピーする](https://qiita-image-store.s3.amazonaws.com/0/7942/967aa882-e9b9-2067-cdf9-f15c24f85115.png)
1. SourceTree上で左上にある **新規/クローンを作成する** を押す
1. ↑で開いた画面にの **元のパス/URL** にさっきのURLをコピーします
1. すぐ下の **保存先のパス** の空欄の部分を押します。すると勝手に保存先のパスが入力されます。
1. **クローン** を押します。
 ![](http://www.norit.jp/app-def/S-102/wp/wp-content/uploads/2014/04/blog20140418nemoto09.jpg)

## 解答方法

### 問題用紙ファイルの構成
1. c-sharp_exam-basics.md  
基本問題。まずはこれをやる。
1. c-sharp_exam-advanced.md  
発展問題。基本問題がすべて解き終わったらやる。

### 問題用紙ファイルの構成
1. AnswerSheetsForBasicProblems
    * Basic_1.cs
    * Basic_2.cs
    * Basic_3.cs
    * Basic_4.cs
    * Basic_5.cs
    * Basic_6.cs
    * Player.cs  
1. AnswerSheetsForAdvancedProblems
    * Advanced_1.cs
    * Advanced_2.cs
    * Advanced_3.cs
    * Advanced_4.cs
    * Advanced_5.cs

基本問題と発展問題はそれぞれ大問6個と大問5個の構成になっている。  
それぞれの番号と同じファイルに解答する。  
なお、基本問題の解答用紙におけるPlaeyr.csは問題文をよく読み使用すること。

### ブランチを切る
解答を始める前に、ちょっとだけSourceTree上で作業を行わなければいけません。  

Tくんの例で紹介したように、試験的に新たな機能を追加したいとき、わざわざプロジェクト全体をコピーしなくても同様のことができます。  

**そう、Gitならね！**  

Gitの  **ブランチ** という機能を使います。
これは、大元の作業の流れから、木の枝のように違う流れを作り、そこで大元とは別の流れとして作業ができる機能です。  
その違う流れ一つ一つを **ブランチ** と言います。  

別のブランチで書いたコードは、大元のブランチに合体することができます。  
この作業を **マージ** といいます。  
Tくんの例のようにいちいち **コピペをしなくてもいい** のです。  

また、異なるブランチはその間を行ったり来たりできるので、様々な作業を平行して進めることができます。  
Tくんのように、機能ごとに **プロジェクトをまるごとコピーしなくてもいい** のです。  

ブランチには名前をつけることができ、最初にリポジトリを作った時から存在する木の幹にあたるブランチを **masterブランチ** といいます。  
自分で作るブランチには好きな名前をつけることができます。  

しかしながら、今回のブランチの使用方法は、上の説明と趣旨が少し異なってしまいます。  
一般的な使い方は上のとおりなので、覚えておきましょう。  

では実際にブランチを切ってみましょう。

1. SourceTreeの上のメニューにあるブランチを押す  
![SourceTreeの上のメニューにあるブランチを押す](http://cdn-ak.f.st-hatena.com/images/fotolife/y/yk5656/20140608/20140608182428.png)
1. 新規ブランチ欄に好きなブランチ名を入れる
![新規ブランチ欄に好きなブランチ名を入れる](http://cdn-ak.f.st-hatena.com/images/fotolife/y/yk5656/20140608/20140608182449.png)
1. ブランチを作成 を押す

こうすることで、新たにブランチが作られます。  
今後解答するときは、今作ったブランチ上で作業をして下さい。  
そうしないと、提出するしたときに大元のファイルが変更されてしまい、あとから答える人が困ります。  
通常ブランチは、大元を汚さないように新たに機能を追加するためにあるので、最後にmasterブランチにマージします。  
今回は最後までマージしないで、そのブランチをそのままGithubにアップロードします。  
この点で、ブランチの使い方の趣旨が少し異なっていますが、このような使い方もできるということです。

現在どのブランチで作業をしているかは、SourceTreeの左側のファイル構造みたいになっているところの、ブランチというところを見ればわかります。
**チェックマークが付いているブランチ** がそうです。  
![チェックマークが付いているブランチが現在作業しているブランチ](http://hm-solution.jp/column/wp-content/uploads/2013/11/st_start.png)

### コミットする
解答し終わったら、 **コミット** という作業をしなければいけません。  
そもそもGitは変更履歴をどんどん貯めこんで管理していき、前の状態に戻したりできるシステムです。  
ですが、前の状態に戻すといっても、こちら側が区切りをつけてあげないと、どの前の状態に戻すのかGitは理解できないでしょう。  
その **変更履歴に区切りをつける作業** がコミットです。  
コミットすることで、 **最後のコミットから今までの変更** を履歴としてひとまとまりにしてGitに登録します。

コミットの方法は以下のとおりです。
1. SourceTreeの上のメニューからコミットを押す
1. 下のような画面になる。これはいくつかある変更のうちどの変更を登録するか選択する画面である。  
ファイル名の横にあるチェックボックスを押して **Indexにステージしたファイル** に移動したファイルを登録することができる。  
コミットするときは基本的に全部登録するので、 **作業ツリーのファイル** というチェックボックスを押す。  
1. 画面下部の空白の欄に、どういう変更を施したかがわかるように、短いメッセージ(コミットメッセージ)を書く
1. **コミット** を押す
![コミット画面](http://tontotakumi.com/wp-content/uploads/2014/12/SourceTree-commit2.jpg)

前の状態に戻るときには、コミットした単位で戻すことになります。  
そのため、一つの機能を実装するにしても、その内の小さな機能を実装し終わった時など、区切りのいいところでコミットするのが一般的です。  
みんなも解答するときは、ほんとに全部出来てからコミットするのでなはく、大問一個が終わったら等のタイミングでコミットするのをオススメします。

### Visual Studioへの追加方法
提出するときは、解答用紙ファイルのみでいいのですが、みんなおそらく実行して動くかどうか試したいと思います。  
この節ではそのやり方を説明します。  
コピペじゃかっこわるいよね。  

※以下、C#のコンソールプロジェクトを新規に作成してあることを前提として進めます(これはできるよね？)

1. VisualStudioのソリューションエクスプローラー上で、プロジェクト名を右クリックする。
1. **追加の項目** から **既存の項目** を選択する
1. 解答用紙のcsファイルを選ぶ
1. Program.csを右クリックして **プロジェクトから除外** を選択する

これでVisualStudioにファイルが登録されてビルドができるようになります。  
ちなみに、最後にProgram.csを除外したのは、Main関数が二つ存在するとビルドエラーが出るからです。

## 解答の提出方法
やっと最後の章です。  
だいぶ長くなってしまいました。  
もう少しで終わるので、頑張ってください。  

### プッシュ
解答の提出には **プッシュ** というGitの操作をします。
これはどのような操作かというと、自分のPCに貯めこんできた(コミットしてきた)変更履歴をGithubのサーバーに上げることです。  
そうすることで、他の人はリモートレポジトリからダウンロードして最新の状態に保つことができます。

※ちなみに、この最新の変更履歴だけダウンロードすることを **プル** と言います。  

プッシュのやり方は以下のとおりです。
1. コミットしておく
1.  SourceTreeの上のメニューからプッシュを押す
1. 今自分が作業していたブランチ(自分の名前しているはず)にチェックを入れる
1. OK を押す

こうすることで、リモートレポジトリにもブランチが作成され、以後プッシュするたびにこのブランチが成長しいきます。  
プッシュしないと、こちらがみんなの答案を採点できないので、ある程度できたらこまめにプッシュして下さい。

※通常のチーム開発では上の手順ではプッシュすることができません。  
今回は、他の人が、あなたが作業しているブランチを変更することが無いので、上のやり方でプッシュできます。  
本来のやり方を書くとまた長くなってしまうので、割愛します(プッシュの前にプルするだけなんですが)。


## 最後に
お疲れ様でした！  
これでGitはある程度使えるようになったのではないでしょうか。

あとは問題を解くだけです。  
頑張ってください！
